mutate(hispanic_percent = hispanic/race_total) %>%
mutate(white_nonh_percent = white_nonh/race_total) %>%
mutate(black_nonh_percent = black_nonh/race_total) %>%
mutate(amind_nonh_percent = amind_nonh/race_total) %>%
mutate(asian_nonh_percent = asian_nonh/race_total) %>%
mutate(pacific_nonh_percent = pacific_nonh/race_total) %>%
mutate(other_nonh_percent = other_nonh/race_total) %>%
mutate(mult_nonh_percent = mult_nonh/race_total) %>%
mutate(inc_less_10k_percent = inc_less_10k/inc_total) %>%
mutate(inc_10_15k_percent = inc_10_15k/inc_total) %>%
mutate(inc_15_20k_percent = inc_15_20k/inc_total) %>%
mutate(inc_20_25k_percent = inc_20_25k/inc_total) %>%
mutate(inc_25_30k_percent = inc_25_30k/inc_total) %>%
mutate(inc_30_35k_percent = inc_30_35k/inc_total) %>%
mutate(inc_35_40k_percent = inc_35_40k/inc_total) %>%
mutate(inc_40_45k_percent = inc_40_45k/inc_total) %>%
mutate(inc_45_50k_percent = inc_45_50k/inc_total) %>%
mutate(inc_50_60k_percent = inc_50_60k/inc_total) %>%
mutate(inc_60_75k_percent = inc_60_75k/inc_total) %>%
mutate(inc_75_100k_percent = inc_75_100k/inc_total) %>%
mutate(inc_100_125k_percent = inc_100_125k/inc_total) %>%
mutate(inc_125_150k_percent = inc_125_150k/inc_total) %>%
mutate(inc_150_200k_percent = inc_150_200k/inc_total) %>%
mutate(inc_200k_more_percent = inc_200k_more/inc_total) %>%
mutate(less_than_9_percent = less_than_9/ed_total) %>%
mutate(some_hs_percent = some_hs/ed_total) %>%
mutate(hs_grad_percent = hs_grad/ed_total) %>%
mutate(some_college_percent = some_college/ed_total) %>%
mutate(associate_percent = associate/ed_total) %>%
mutate(bachelors_percent = bachelors/ed_total) %>%
mutate(grad_percent = grad/ed_total) %>%
mutate(hs_higher_percent = hs_higher/ed_total) %>%
mutate(bachelors_higher_percent = bachelors_higher/ed_total) %>%
mutate(veteran_percent = veteran/vet_status_total) %>%
mutate(disabled_percent = disabled/disabled_status_total) %>%
mutate(same_house_percent = same_house/residence_total) %>%
mutate(same_county_percent = same_county/residence_total) %>%
mutate(diff_county_percent = diff_county/residence_total) %>%
mutate(diff_state_percent = diff_state/residence_total) %>%
mutate(abroad_percent = abroad/residence_total) %>%
mutate(born_same_state_percent = born_same_state/place_total) %>%
mutate(born_diff_state_percent = born_diff_state/place_total) %>%
mutate(born_us_other_percent = born_us_other/place_total) %>%
mutate(born_abroad_percent = born_abroad/place_total) %>%
mutate(with_comp_percent = with_comp/comp_total) %>%
mutate(with_broadband_percent = with_broadband/comp_total) %>%
mutate(commute_drive_alone_percent = commute_drive_alone/commute_total) %>%
mutate(commute_carpool_percent = commute_carpool/commute_total) %>%
mutate(commute_transit_percent = commute_transit/commute_total) %>%
mutate(commute_walk_percent = commute_walk/commute_total) %>%
mutate(commute_other_percent = commute_other/commute_total) %>%
mutate(commute_wfh_percent = commute_wfh/commute_total) %>%
mutate(earnings_percent = earnings/inc_ben_total) %>%
mutate(soc_sec_percent = soc_sec/inc_ben_total) %>%
mutate(retirement_inc_percent = retirement_inc/inc_ben_total) %>%
mutate(supp_sec_percent = supp_sec/inc_ben_total) %>%
mutate(cash_assist_percent = cash_assist/inc_ben_total) %>%
mutate(food_stamp_percent = food_stamp/inc_ben_total) %>%
mutate(private_ins_percent = private_ins/insurance_total) %>%
mutate(public_ins_percent = public_ins/insurance_total) %>%
mutate(no_ins_percent = no_ins/insurance_total) %>%
mutate(sfh_percent = sfh/housing_units) %>%
mutate(sf_attached_percent = sf_attached/housing_units) %>%
mutate(duplex_percent = duplex/housing_units) %>%
mutate(tri_quad_plex_percent = tri_quad_plex/housing_units) %>%
mutate(apt_5_9_percent = apt_5_9/housing_units) %>%
mutate(apt_10_more_percent = apt_10_more/housing_units) %>%
mutate(mobile_home_percent = mobile_home/housing_units) %>%
mutate(built_2014_later_percent = built_2014_later/housing_units) %>%
mutate(built_2010_2013_percent = built_2010_2013/housing_units) %>%
mutate(built_2000_2009_percent = built_2000_2009/housing_units) %>%
mutate(built_1980_1999_percent = built_1980_1999/housing_units) %>%
mutate(built_1960_1979_percent = built_1960_1979/housing_units) %>%
mutate(built_1940_1959_percent = built_1940_1959/housing_units) %>%
mutate(built_1939_earlier_percent = built_1939_earlier/housing_units) %>%
mutate(no_bed_percent = no_bed/housing_units) %>%
mutate(one_bed_percent = one_bed/housing_units) %>%
mutate(two_three_bed_percent = two_three_bed/housing_units) %>%
mutate(four_more_bed_percent = four_more_bed/housing_units) %>%
mutate(no_veh_percent = no_veh/housing_units) %>%
mutate(one_veh_percent = one_veh/housing_units) %>%
mutate(two_veh_percent = two_veh/housing_units) %>%
mutate(three_more_veh_percent = three_more_veh/housing_units) %>%
mutate(gas_pipe_heat_percent = gas_pipe_heat/housing_units) %>%
mutate(gas_tank_heat_percent = gas_tank_heat/housing_units) %>%
mutate(elec_heat_percent = elec_heat/housing_units) %>%
mutate(oil_heat_percent = oil_heat/housing_units) %>%
mutate(coal_heat_percent = coal_heat/housing_units) %>%
mutate(other_heat_percent = other_heat/housing_units) %>%
mutate(no_heat_percent = no_heat/housing_units) %>%
mutate(owner_occ_percent = owner_occ/occ_total) %>%
mutate(renter_occ_percent = renter_occ/occ_total) %>%
mutate(english_only_percent = english_only/pop_5_over) %>%
mutate(spanish_percent = spanish/pop_5_over) %>%
mutate(indo_euro_lang_percent = indo_euro_lang/pop_5_over) %>%
mutate(asia_pacific_lang_percent = asia_pacific_lang/pop_5_over) %>%
mutate(other_lang_percent = other_lang/pop_5_over) %>%
mutate(dataset = "state")
#calculate percentages
mcmen_tract = mcmen_tract %>%
mutate(hispanic_percent = hispanic/race_total) %>%
mutate(white_nonh_percent = white_nonh/race_total) %>%
mutate(black_nonh_percent = black_nonh/race_total) %>%
mutate(amind_nonh_percent = amind_nonh/race_total) %>%
mutate(asian_nonh_percent = asian_nonh/race_total) %>%
mutate(pacific_nonh_percent = pacific_nonh/race_total) %>%
mutate(other_nonh_percent = other_nonh/race_total) %>%
mutate(mult_nonh_percent = mult_nonh/race_total) %>%
mutate(inc_less_10k_percent = inc_less_10k/inc_total) %>%
mutate(inc_10_15k_percent = inc_10_15k/inc_total) %>%
mutate(inc_15_20k_percent = inc_15_20k/inc_total) %>%
mutate(inc_20_25k_percent = inc_20_25k/inc_total) %>%
mutate(inc_25_30k_percent = inc_25_30k/inc_total) %>%
mutate(inc_30_35k_percent = inc_30_35k/inc_total) %>%
mutate(inc_35_40k_percent = inc_35_40k/inc_total) %>%
mutate(inc_40_45k_percent = inc_40_45k/inc_total) %>%
mutate(inc_45_50k_percent = inc_45_50k/inc_total) %>%
mutate(inc_50_60k_percent = inc_50_60k/inc_total) %>%
mutate(inc_60_75k_percent = inc_60_75k/inc_total) %>%
mutate(inc_75_100k_percent = inc_75_100k/inc_total) %>%
mutate(inc_100_125k_percent = inc_100_125k/inc_total) %>%
mutate(inc_125_150k_percent = inc_125_150k/inc_total) %>%
mutate(inc_150_200k_percent = inc_150_200k/inc_total) %>%
mutate(inc_200k_more_percent = inc_200k_more/inc_total) %>%
mutate(less_than_9_percent = less_than_9/ed_total) %>%
mutate(some_hs_percent = some_hs/ed_total) %>%
mutate(hs_grad_percent = hs_grad/ed_total) %>%
mutate(some_college_percent = some_college/ed_total) %>%
mutate(associate_percent = associate/ed_total) %>%
mutate(bachelors_percent = bachelors/ed_total) %>%
mutate(grad_percent = grad/ed_total) %>%
mutate(hs_higher_percent = hs_higher/ed_total) %>%
mutate(bachelors_higher_percent = bachelors_higher/ed_total) %>%
mutate(veteran_percent = veteran/vet_status_total) %>%
mutate(disabled_percent = disabled/disabled_status_total) %>%
mutate(same_house_percent = same_house/residence_total) %>%
mutate(same_county_percent = same_county/residence_total) %>%
mutate(diff_county_percent = diff_county/residence_total) %>%
mutate(diff_state_percent = diff_state/residence_total) %>%
mutate(abroad_percent = abroad/residence_total) %>%
mutate(born_same_state_percent = born_same_state/place_total) %>%
mutate(born_diff_state_percent = born_diff_state/place_total) %>%
mutate(born_us_other_percent = born_us_other/place_total) %>%
mutate(born_abroad_percent = born_abroad/place_total) %>%
mutate(with_comp_percent = with_comp/comp_total) %>%
mutate(with_broadband_percent = with_broadband/comp_total) %>%
mutate(commute_drive_alone_percent = commute_drive_alone/commute_total) %>%
mutate(commute_carpool_percent = commute_carpool/commute_total) %>%
mutate(commute_transit_percent = commute_transit/commute_total) %>%
mutate(commute_walk_percent = commute_walk/commute_total) %>%
mutate(commute_other_percent = commute_other/commute_total) %>%
mutate(commute_wfh_percent = commute_wfh/commute_total) %>%
mutate(earnings_percent = earnings/inc_ben_total) %>%
mutate(soc_sec_percent = soc_sec/inc_ben_total) %>%
mutate(retirement_inc_percent = retirement_inc/inc_ben_total) %>%
mutate(supp_sec_percent = supp_sec/inc_ben_total) %>%
mutate(cash_assist_percent = cash_assist/inc_ben_total) %>%
mutate(food_stamp_percent = food_stamp/inc_ben_total) %>%
mutate(private_ins_percent = private_ins/insurance_total) %>%
mutate(public_ins_percent = public_ins/insurance_total) %>%
mutate(no_ins_percent = no_ins/insurance_total) %>%
mutate(sfh_percent = sfh/housing_units) %>%
mutate(sf_attached_percent = sf_attached/housing_units) %>%
mutate(duplex_percent = duplex/housing_units) %>%
mutate(tri_quad_plex_percent = tri_quad_plex/housing_units) %>%
mutate(apt_5_9_percent = apt_5_9/housing_units) %>%
mutate(apt_10_more_percent = apt_10_more/housing_units) %>%
mutate(mobile_home_percent = mobile_home/housing_units) %>%
mutate(built_2014_later_percent = built_2014_later/housing_units) %>%
mutate(built_2010_2013_percent = built_2010_2013/housing_units) %>%
mutate(built_2000_2009_percent = built_2000_2009/housing_units) %>%
mutate(built_1980_1999_percent = built_1980_1999/housing_units) %>%
mutate(built_1960_1979_percent = built_1960_1979/housing_units) %>%
mutate(built_1940_1959_percent = built_1940_1959/housing_units) %>%
mutate(built_1939_earlier_percent = built_1939_earlier/housing_units) %>%
mutate(no_bed_percent = no_bed/housing_units) %>%
mutate(one_bed_percent = one_bed/housing_units) %>%
mutate(two_three_bed_percent = two_three_bed/housing_units) %>%
mutate(four_more_bed_percent = four_more_bed/housing_units) %>%
mutate(no_veh_percent = no_veh/housing_units) %>%
mutate(one_veh_percent = one_veh/housing_units) %>%
mutate(two_veh_percent = two_veh/housing_units) %>%
mutate(three_more_veh_percent = three_more_veh/housing_units) %>%
mutate(gas_pipe_heat_percent = gas_pipe_heat/housing_units) %>%
mutate(gas_tank_heat_percent = gas_tank_heat/housing_units) %>%
mutate(elec_heat_percent = elec_heat/housing_units) %>%
mutate(oil_heat_percent = oil_heat/housing_units) %>%
mutate(coal_heat_percent = coal_heat/housing_units) %>%
mutate(other_heat_percent = other_heat/housing_units) %>%
mutate(no_heat_percent = no_heat/housing_units) %>%
mutate(owner_occ_percent = owner_occ/occ_total) %>%
mutate(renter_occ_percent = renter_occ/occ_total) %>%
mutate(english_only_percent = english_only/pop_5_over) %>%
mutate(spanish_percent = spanish/pop_5_over) %>%
mutate(indo_euro_lang_percent = indo_euro_lang/pop_5_over) %>%
mutate(asia_pacific_lang_percent = asia_pacific_lang/pop_5_over) %>%
mutate(other_lang_percent = other_lang/pop_5_over) %>%
mutate(dataset = "mcmens")
?summarise_each
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER)
#view columns to get names for later code
View(data.frame(colnames(mcmen_tract)))
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
aggregate(by = dataset, sum)
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
mutate(dataset = "mcmens") %>%
aggregate(by = `dataset`, sum)
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
mutate(dataset = "mcmens") %>%
aggregate(dataset, sum)
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
mutate(dataset = "mcmens") %>%
aggregate(mcmen_tract$dataset, sum)
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
mutate(dataset = "mcmens") %>%
aggregate(list(mcmen_tract$dataset), sum)
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
mutate(dataset = "mcmens") %>%
aggregate(by = list(mcmen_tract$dataset), FUN = sum)
test = aggregate(mcmen_table, by = list(mcmen_tract$dataset), FUN = sum)
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
mutate(dataset = "mcmens")
View(mcmen_table)
#summarize to obtain percents
mcmen_table = mcmen_tract %>%
select(-c(STATEFP,COUNTYFP, TRACTCE, GEOID, NAME, NAMELSAD,
MTFCC, FUNCSTAT,INTPTLAT, INTPTLON, geog, tract)) %>%
rename(land_area = ALAND, area_water = AWATER) %>%
mutate(dataset = "mcmens")
View(mcmen_table)
test = aggregate(mcmen_table, by = list(mcmen_tract$dataset), FUN = sum)
?aggregate
?starts_with
?across
test = mcmen_table %>%
group_by(dataset) %>%
summarise(across(, sum))
test = mcmen_table %>%
group_by(dataset) %>%
summarise(across(land_area:other_lang, sum))
View(test)
mcmen_table = mcmen_table %>%
group_by(dataset) %>%
summarise(across(land_area:other_lang, sum))
#calculate percentages
mcmen_tract = mcmen_tract %>%
rename(race_total = total) %>%
mutate(hispanic_percent = hispanic/race_total) %>%
mutate(white_nonh_percent = white_nonh/race_total) %>%
mutate(black_nonh_percent = black_nonh/race_total) %>%
mutate(amind_nonh_percent = amind_nonh/race_total) %>%
mutate(asian_nonh_percent = asian_nonh/race_total) %>%
mutate(pacific_nonh_percent = pacific_nonh/race_total) %>%
mutate(other_nonh_percent = other_nonh/race_total) %>%
mutate(mult_nonh_percent = mult_nonh/race_total) %>%
mutate(inc_less_10k_percent = inc_less_10k/inc_total) %>%
mutate(inc_10_15k_percent = inc_10_15k/inc_total) %>%
mutate(inc_15_20k_percent = inc_15_20k/inc_total) %>%
mutate(inc_20_25k_percent = inc_20_25k/inc_total) %>%
mutate(inc_25_30k_percent = inc_25_30k/inc_total) %>%
mutate(inc_30_35k_percent = inc_30_35k/inc_total) %>%
mutate(inc_35_40k_percent = inc_35_40k/inc_total) %>%
mutate(inc_40_45k_percent = inc_40_45k/inc_total) %>%
mutate(inc_45_50k_percent = inc_45_50k/inc_total) %>%
mutate(inc_50_60k_percent = inc_50_60k/inc_total) %>%
mutate(inc_60_75k_percent = inc_60_75k/inc_total) %>%
mutate(inc_75_100k_percent = inc_75_100k/inc_total) %>%
mutate(inc_100_125k_percent = inc_100_125k/inc_total) %>%
mutate(inc_125_150k_percent = inc_125_150k/inc_total) %>%
mutate(inc_150_200k_percent = inc_150_200k/inc_total) %>%
mutate(inc_200k_more_percent = inc_200k_more/inc_total) %>%
mutate(less_than_9_percent = less_than_9/ed_total) %>%
mutate(some_hs_percent = some_hs/ed_total) %>%
mutate(hs_grad_percent = hs_grad/ed_total) %>%
mutate(some_college_percent = some_college/ed_total) %>%
mutate(associate_percent = associate/ed_total) %>%
mutate(bachelors_percent = bachelors/ed_total) %>%
mutate(grad_percent = grad/ed_total) %>%
mutate(hs_higher_percent = hs_higher/ed_total) %>%
mutate(bachelors_higher_percent = bachelors_higher/ed_total) %>%
mutate(veteran_percent = veteran/vet_status_total) %>%
mutate(disabled_percent = disabled/disabled_status_total) %>%
mutate(same_house_percent = same_house/residence_total) %>%
mutate(same_county_percent = same_county/residence_total) %>%
mutate(diff_county_percent = diff_county/residence_total) %>%
mutate(diff_state_percent = diff_state/residence_total) %>%
mutate(abroad_percent = abroad/residence_total) %>%
mutate(born_same_state_percent = born_same_state/place_total) %>%
mutate(born_diff_state_percent = born_diff_state/place_total) %>%
mutate(born_us_other_percent = born_us_other/place_total) %>%
mutate(born_abroad_percent = born_abroad/place_total) %>%
mutate(with_comp_percent = with_comp/comp_total) %>%
mutate(with_broadband_percent = with_broadband/comp_total) %>%
mutate(commute_drive_alone_percent = commute_drive_alone/commute_total) %>%
mutate(commute_carpool_percent = commute_carpool/commute_total) %>%
mutate(commute_transit_percent = commute_transit/commute_total) %>%
mutate(commute_walk_percent = commute_walk/commute_total) %>%
mutate(commute_other_percent = commute_other/commute_total) %>%
mutate(commute_wfh_percent = commute_wfh/commute_total) %>%
mutate(earnings_percent = earnings/inc_ben_total) %>%
mutate(soc_sec_percent = soc_sec/inc_ben_total) %>%
mutate(retirement_inc_percent = retirement_inc/inc_ben_total) %>%
mutate(supp_sec_percent = supp_sec/inc_ben_total) %>%
mutate(cash_assist_percent = cash_assist/inc_ben_total) %>%
mutate(food_stamp_percent = food_stamp/inc_ben_total) %>%
mutate(private_ins_percent = private_ins/insurance_total) %>%
mutate(public_ins_percent = public_ins/insurance_total) %>%
mutate(no_ins_percent = no_ins/insurance_total) %>%
mutate(sfh_percent = sfh/housing_units) %>%
mutate(sf_attached_percent = sf_attached/housing_units) %>%
mutate(duplex_percent = duplex/housing_units) %>%
mutate(tri_quad_plex_percent = tri_quad_plex/housing_units) %>%
mutate(apt_5_9_percent = apt_5_9/housing_units) %>%
mutate(apt_10_more_percent = apt_10_more/housing_units) %>%
mutate(mobile_home_percent = mobile_home/housing_units) %>%
mutate(built_2014_later_percent = built_2014_later/housing_units) %>%
mutate(built_2010_2013_percent = built_2010_2013/housing_units) %>%
mutate(built_2000_2009_percent = built_2000_2009/housing_units) %>%
mutate(built_1980_1999_percent = built_1980_1999/housing_units) %>%
mutate(built_1960_1979_percent = built_1960_1979/housing_units) %>%
mutate(built_1940_1959_percent = built_1940_1959/housing_units) %>%
mutate(built_1939_earlier_percent = built_1939_earlier/housing_units) %>%
mutate(no_bed_percent = no_bed/housing_units) %>%
mutate(one_bed_percent = one_bed/housing_units) %>%
mutate(two_three_bed_percent = two_three_bed/housing_units) %>%
mutate(four_more_bed_percent = four_more_bed/housing_units) %>%
mutate(no_veh_percent = no_veh/housing_units) %>%
mutate(one_veh_percent = one_veh/housing_units) %>%
mutate(two_veh_percent = two_veh/housing_units) %>%
mutate(three_more_veh_percent = three_more_veh/housing_units) %>%
mutate(gas_pipe_heat_percent = gas_pipe_heat/housing_units) %>%
mutate(gas_tank_heat_percent = gas_tank_heat/housing_units) %>%
mutate(elec_heat_percent = elec_heat/housing_units) %>%
mutate(oil_heat_percent = oil_heat/housing_units) %>%
mutate(coal_heat_percent = coal_heat/housing_units) %>%
mutate(other_heat_percent = other_heat/housing_units) %>%
mutate(no_heat_percent = no_heat/housing_units) %>%
mutate(owner_occ_percent = owner_occ/occ_total) %>%
mutate(renter_occ_percent = renter_occ/occ_total) %>%
mutate(english_only_percent = english_only/pop_5_over) %>%
mutate(spanish_percent = spanish/pop_5_over) %>%
mutate(indo_euro_lang_percent = indo_euro_lang/pop_5_over) %>%
mutate(asia_pacific_lang_percent = asia_pacific_lang/pop_5_over) %>%
mutate(other_lang_percent = other_lang/pop_5_over) %>%
relocate(dataset)
#calculate percentages
mcmen_table = mcmen_table %>%
rename(race_total = total) %>%
mutate(hispanic_percent = hispanic/race_total) %>%
mutate(white_nonh_percent = white_nonh/race_total) %>%
mutate(black_nonh_percent = black_nonh/race_total) %>%
mutate(amind_nonh_percent = amind_nonh/race_total) %>%
mutate(asian_nonh_percent = asian_nonh/race_total) %>%
mutate(pacific_nonh_percent = pacific_nonh/race_total) %>%
mutate(other_nonh_percent = other_nonh/race_total) %>%
mutate(mult_nonh_percent = mult_nonh/race_total) %>%
mutate(inc_less_10k_percent = inc_less_10k/inc_total) %>%
mutate(inc_10_15k_percent = inc_10_15k/inc_total) %>%
mutate(inc_15_20k_percent = inc_15_20k/inc_total) %>%
mutate(inc_20_25k_percent = inc_20_25k/inc_total) %>%
mutate(inc_25_30k_percent = inc_25_30k/inc_total) %>%
mutate(inc_30_35k_percent = inc_30_35k/inc_total) %>%
mutate(inc_35_40k_percent = inc_35_40k/inc_total) %>%
mutate(inc_40_45k_percent = inc_40_45k/inc_total) %>%
mutate(inc_45_50k_percent = inc_45_50k/inc_total) %>%
mutate(inc_50_60k_percent = inc_50_60k/inc_total) %>%
mutate(inc_60_75k_percent = inc_60_75k/inc_total) %>%
mutate(inc_75_100k_percent = inc_75_100k/inc_total) %>%
mutate(inc_100_125k_percent = inc_100_125k/inc_total) %>%
mutate(inc_125_150k_percent = inc_125_150k/inc_total) %>%
mutate(inc_150_200k_percent = inc_150_200k/inc_total) %>%
mutate(inc_200k_more_percent = inc_200k_more/inc_total) %>%
mutate(less_than_9_percent = less_than_9/ed_total) %>%
mutate(some_hs_percent = some_hs/ed_total) %>%
mutate(hs_grad_percent = hs_grad/ed_total) %>%
mutate(some_college_percent = some_college/ed_total) %>%
mutate(associate_percent = associate/ed_total) %>%
mutate(bachelors_percent = bachelors/ed_total) %>%
mutate(grad_percent = grad/ed_total) %>%
mutate(hs_higher_percent = hs_higher/ed_total) %>%
mutate(bachelors_higher_percent = bachelors_higher/ed_total) %>%
mutate(veteran_percent = veteran/vet_status_total) %>%
mutate(disabled_percent = disabled/disabled_status_total) %>%
mutate(same_house_percent = same_house/residence_total) %>%
mutate(same_county_percent = same_county/residence_total) %>%
mutate(diff_county_percent = diff_county/residence_total) %>%
mutate(diff_state_percent = diff_state/residence_total) %>%
mutate(abroad_percent = abroad/residence_total) %>%
mutate(born_same_state_percent = born_same_state/place_total) %>%
mutate(born_diff_state_percent = born_diff_state/place_total) %>%
mutate(born_us_other_percent = born_us_other/place_total) %>%
mutate(born_abroad_percent = born_abroad/place_total) %>%
mutate(with_comp_percent = with_comp/comp_total) %>%
mutate(with_broadband_percent = with_broadband/comp_total) %>%
mutate(commute_drive_alone_percent = commute_drive_alone/commute_total) %>%
mutate(commute_carpool_percent = commute_carpool/commute_total) %>%
mutate(commute_transit_percent = commute_transit/commute_total) %>%
mutate(commute_walk_percent = commute_walk/commute_total) %>%
mutate(commute_other_percent = commute_other/commute_total) %>%
mutate(commute_wfh_percent = commute_wfh/commute_total) %>%
mutate(earnings_percent = earnings/inc_ben_total) %>%
mutate(soc_sec_percent = soc_sec/inc_ben_total) %>%
mutate(retirement_inc_percent = retirement_inc/inc_ben_total) %>%
mutate(supp_sec_percent = supp_sec/inc_ben_total) %>%
mutate(cash_assist_percent = cash_assist/inc_ben_total) %>%
mutate(food_stamp_percent = food_stamp/inc_ben_total) %>%
mutate(private_ins_percent = private_ins/insurance_total) %>%
mutate(public_ins_percent = public_ins/insurance_total) %>%
mutate(no_ins_percent = no_ins/insurance_total) %>%
mutate(sfh_percent = sfh/housing_units) %>%
mutate(sf_attached_percent = sf_attached/housing_units) %>%
mutate(duplex_percent = duplex/housing_units) %>%
mutate(tri_quad_plex_percent = tri_quad_plex/housing_units) %>%
mutate(apt_5_9_percent = apt_5_9/housing_units) %>%
mutate(apt_10_more_percent = apt_10_more/housing_units) %>%
mutate(mobile_home_percent = mobile_home/housing_units) %>%
mutate(built_2014_later_percent = built_2014_later/housing_units) %>%
mutate(built_2010_2013_percent = built_2010_2013/housing_units) %>%
mutate(built_2000_2009_percent = built_2000_2009/housing_units) %>%
mutate(built_1980_1999_percent = built_1980_1999/housing_units) %>%
mutate(built_1960_1979_percent = built_1960_1979/housing_units) %>%
mutate(built_1940_1959_percent = built_1940_1959/housing_units) %>%
mutate(built_1939_earlier_percent = built_1939_earlier/housing_units) %>%
mutate(no_bed_percent = no_bed/housing_units) %>%
mutate(one_bed_percent = one_bed/housing_units) %>%
mutate(two_three_bed_percent = two_three_bed/housing_units) %>%
mutate(four_more_bed_percent = four_more_bed/housing_units) %>%
mutate(no_veh_percent = no_veh/housing_units) %>%
mutate(one_veh_percent = one_veh/housing_units) %>%
mutate(two_veh_percent = two_veh/housing_units) %>%
mutate(three_more_veh_percent = three_more_veh/housing_units) %>%
mutate(gas_pipe_heat_percent = gas_pipe_heat/housing_units) %>%
mutate(gas_tank_heat_percent = gas_tank_heat/housing_units) %>%
mutate(elec_heat_percent = elec_heat/housing_units) %>%
mutate(oil_heat_percent = oil_heat/housing_units) %>%
mutate(coal_heat_percent = coal_heat/housing_units) %>%
mutate(other_heat_percent = other_heat/housing_units) %>%
mutate(no_heat_percent = no_heat/housing_units) %>%
mutate(owner_occ_percent = owner_occ/occ_total) %>%
mutate(renter_occ_percent = renter_occ/occ_total) %>%
mutate(english_only_percent = english_only/pop_5_over) %>%
mutate(spanish_percent = spanish/pop_5_over) %>%
mutate(indo_euro_lang_percent = indo_euro_lang/pop_5_over) %>%
mutate(asia_pacific_lang_percent = asia_pacific_lang/pop_5_over) %>%
mutate(other_lang_percent = other_lang/pop_5_over) %>%
relocate(dataset)
#bring in urban areas dataset
urban_file = 'tl_2023_us_uac20.shp'
urban_shape = read_sf(file.path(paste0(project_dir, "/Data/Census Shapefiles/tl_2023_us_uac20/", urban_file)))
View(urban_shape)
#extract or and wa urban areas
urban_shape = urban_shape %>%
select(contains(c("OR", "WA")))
View(urban_shape)
urban_shape = read_sf(file.path(paste0(project_dir, "/Data/Census Shapefiles/tl_2023_us_uac20/", urban_file)))
?filter
?contains
#extract or and wa urban areas
urban_shape = urban_shape %>%
filter(grepl('OR|WA'))
#extract or and wa urban areas
urban_shape = urban_shape %>%
filter(grepl('OR|WA', NAME))
#extract or and wa urban areas
urban_shape = urban_shape %>%
filter(grepl('OR|WA', NAME20))
#extract or and wa urban areas
urban_shape = urban_shape %>%
filter(grepl('OR|WA', NAME20)) %>%
filter(-grepl('ID', NAME20))
urban_shape = read_sf(file.path(paste0(project_dir, "/Data/Census Shapefiles/tl_2023_us_uac20/", urban_file)))
#extract or and wa urban areas
urban_shape = urban_shape %>%
filter(grepl('OR|WA', NAME20)) %>%
filter(-grepl('ID', NAME20))
urban_shape = read_sf(file.path(paste0(project_dir, "/Data/Census Shapefiles/tl_2023_us_uac20/", urban_file)))
#extract or and wa urban areas
urban_shape = urban_shape %>%
filter(grepl('OR|WA', NAME20)) %>%
filter(!grepl('ID', NAME20))
